function getIsotopeFilter(){var e="*"!=curIsotopeFilter?curIsotopeFilter:"";return e+=""!=curIsotopePage?(""!=e?"":"")+curIsotopePage:""}function pagesClear(){jQuery(".portfolio_items article").removeClass("visible").removeClass("hidden"),jQuery("#portfolio_load_more").hide(),curIsotopePage=""}function pagesBuild(){var e=".portfolio_items article"+("*"!=curIsotopeFilter?curIsotopeFilter:""),r=jQuery(e),o=r.length;if(jQuery("#portfolio_load_more").hide(),o>ppp){var t='<a href="#" data-filter=".visible" id="more_results"><span>更多</span></a>';r.each(function(e,r){var o=Math.floor(e/ppp)+1;jQuery(r).addClass(1==o?"visible":"hidden")}),jQuery("#portfolio_load_more").show(),jQuery("#portfolio_load_more").html(t),curIsotopePage=".visible"}}function skills_anim(){if(jQuery("#page").hasClass("print"))return!1;if(jQuery("#resume .widgets_section.section-header:visible").length>0){var e=jQuery(window).scrollTop()+jQuery(window).height(),r=jQuery("#resume:visible .widgets_section.section-header").offset().top+jQuery(".widgets_section.section-header").height()+200;""==jQuery(window).scrollTop&&(e=800),e>=r&&jQuery(".widget_skills .skills_row .progress").each(function(){var e=jQuery(this).find(".value").text();jQuery(this).animate({width:e},1e3,"easeInQuint")})}}function formValidate(e,r){var o="";return e.find(":input").each(function(){if(""==o||!r.exit_after_first_error)for(var e=0;e<r.rules.length;e++)if(jQuery(this).attr("name")==r.rules[e].field){var t=jQuery(this).val(),s=!1;if("object"==typeof r.rules[e].min_length&&r.rules[e].min_length.value>0&&t.length<r.rules[e].min_length.value&&(""==o&&jQuery(this).get(0).focus(),o+='<p class="error_item">'+("undefined"!=typeof r.rules[e].min_length.message?r.rules[e].min_length.message:r.error_message_text)+"</p>",s=!0),s&&r.exit_after_first_error||"object"!=typeof r.rules[e].max_length||r.rules[e].max_length.value>0&&t.length>r.rules[e].max_length.value&&(""==o&&jQuery(this).get(0).focus(),o+='<p class="error_item">'+("undefined"!=typeof r.rules[e].max_length.message?r.rules[e].max_length.message:r.error_message_text)+"</p>",s=!0),!(s&&r.exit_after_first_error||"object"!=typeof r.rules[e].mask)&&""!=r.rules[e].mask.value){var i=new RegExp(r.rules[e].mask.value);i.test(t)||(""==o&&jQuery(this).get(0).focus(),o+='<p class="error_item">'+("undefined"!=typeof r.rules[e].mask.message?r.rules[e].mask.message:r.error_message_text)+"</p>",s=!0)}s&&r.exit_after_first_error||"object"!=typeof r.rules[e].equal_to||""!=r.rules[e].equal_to.value&&t!=jQuery(jQuery(this).get(0).form[r.rules[e].equal_to.value]).val()&&(""==o&&jQuery(this).get(0).focus(),o+='<p class="error_item">'+("undefined"!=typeof r.rules[e].equal_to.message?r.rules[e].equal_to.message:r.error_message_text)+"</p>",s=!0),""!=r.error_fields_class&&jQuery(this).toggleClass(r.error_fields_class,s)}}),""!=o&&r.error_message_show&&(error_msg_box=e.find(".result"),0==error_msg_box.length&&(e.append('<div class="result"></div>'),error_msg_box=e.find(".result")),r.error_message_class&&error_msg_box.toggleClass(r.error_message_class,!0),error_msg_box.html(o).fadeIn(),setTimeout("error_msg_box.fadeOut()",r.error_message_time)),""!=o}function setColorPicker(e){jQuery("#"+e).ColorPicker({color:jQuery("#"+e).val(),onShow:function(e){return jQuery(e).fadeIn(500),!1},onHide:function(e){return jQuery(e).fadeOut(500),!1},onChange:function(r,o){jQuery("body").css("background","#"+o),jQuery("#"+e).css("backgroundColor","#"+o),setCookie("body_bg","#"+o,9999999,"/"),deleteCookie("body_img","/"),deleteCookie("body_pt","/")}})}function getCookie(e){var r="undefined"!=arguments[1]?arguments[1]:null,o=document.cookie.indexOf(e+"="),t=o+e.length+1;if(!o&&e!=document.cookie.substring(0,e.length))return r;if(-1==o)return r;var s=document.cookie.indexOf(";",t);return-1==s&&(s=document.cookie.length),unescape(document.cookie.substring(t,s))}function setCookie(e,r,o,t,s,i){var a=new Date;a.setTime(a.getTime()),o&&(o=1e3*o);var l=new Date(a.getTime()+o);document.cookie=e+"="+escape(r)+(o?";expires="+l.toGMTString():"")+(t?";path="+t:"")+(s?";domain="+s:"")+(i?";secure":"")}function deleteCookie(e,r,o){getCookie(e)&&(document.cookie=e+"="+(r?";path="+r:"")+(o?";domain="+o:"")+";expires=Thu, 01-Jan-1970 00:00:01 GMT")}var curIsotopeFilter="*",curIsotopePage="",ppp=6;jQuery(document).ready(function(){if(jQuery("#opt_block .opt_header span").click(function(){jQuery(this).hasClass("vis")?jQuery(this).removeClass("vis").parents("#opt_block").animate({marginRight:0},700,"easeInCubic"):jQuery(this).addClass("vis").parents("#opt_block").animate({marginRight:222},700,"easeInCubic")}),jQuery(".patterns_select li a").click(function(){var e=jQuery(this).find("img").attr("src");return jQuery("body").addClass("colored").removeClass("bg_img").css({background:"url("+e+")"}),setCookie("body_pt",e,9999999,"/"),deleteCookie("body_img","/"),deleteCookie("body_bg","/"),!1}),jQuery(".bg_select li a").click(function(){var e=jQuery(this).find("img").attr("src");return jQuery("body").addClass("bg_img").css({background:"url("+e+")"}),setCookie("body_img",e,9999999,"/"),deleteCookie("body_bg","/"),deleteCookie("body_pt","/"),!1}),jQuery("a[rel^='prettyPhoto']").click(function(e){return jQuery(window).width()<480&&(e.stopImmediatePropagation(),window.location=jQuery(this).attr("href")),e.preventDefault(),!1}),getCookie("body_bg")){var e=getCookie("body_bg");jQuery("body").css({background:e}),jQuery("#bg_col").css({background:e})}else if(getCookie("body_img")){var e=getCookie("body_img");jQuery("body").css({background:"url("+e+")"}).addClass("bg_img")}else if(getCookie("body_pt")){var e=getCookie("body_pt");jQuery("body").css({background:"url("+e+")"}).removeClass("bg_img")}jQuery("a[rel^='prettyPhoto']").prettyPhoto({markup:'<div class="pp_pic_holder"> 			<div class="ppt"></div> 			<div class="pp_content_container"> 				<div class="pp_left"> 				<div class="pp_right"> 					<div class="pp_content"> 						<div class="pp_loaderIcon"></div> 						<div class="pp_fade"> 							<div class="pp_nav"> 								<a href="#" class="pp_arrow_previous"><span></span></a> 								<a href="#" class="pp_arrow_next"><span></span></a> 							</div> 							<div id="pp_full_res"></div> 							<div class="pp_details"> 								<p class="pp_description"></p> 								<a class="pp_close" href="#"><span></span></a> 								<a href="#" class="pp_expand" title="Expand the image"><span></span></a> 							</div> 						</div> 					</div> 				</div> 				</div> 			</div> 		</div> 		<div class="pp_overlay"></div>',social_tools:"",theme:"light_rounded",deeplinking:!1,horizontal_padding:0,overlay_gallery:!1}),jQuery("#nav_tabs").tabs("#tab_section > .tab_content",{tabs:"section > .section_header > .section_title",effect:"slide",slideUpSpeed:600,slideDownSpeed:1e3,initialIndex:0,onClick:function(e,r){function o(){jQuery(".map_wrap .map_overlay").fadeOut()}var t=jQuery("#nav_tabs > li > a"),s=t.eq(r);"#portfolio"===s.attr("href")&&"#portfolio"===s.attr("href")&&jQuery(".portfolio_items").length>0&&jQuery(".portfolio_items").isotope({filter:getIsotopeFilter()}),"#contacts"===s.attr("href")&&(setTimeout(o,1e3),window.googlemap_refresh&&googlemap_refresh(),googlemap_refreshed=!0),"#profile"===s.attr("href")&&skills_anim()}}),jQuery("#page:not(.print) #resume .section-header").click(function(){jQuery(this).toggleClass("opened").next().stop().slideToggle();var e=jQuery(this).offset().top;return jQuery(this).hasClass("opened")&&jQuery("html, body").animate({scrollTop:e-30}),!1}),jQuery(".portfolio_wrapper").length>0&&(jQuery(".portfolio_items").isotope({itemSelector:".portfolio_post",transformsEnabled:!0,duration:750,resizable:!0,resizesContainer:!0,layoutMode:"fitRows"}),jQuery("#portfolio_iso_filters li a").click(function(){var e=jQuery(this).attr("data-filter");return curIsotopeFilter=e,jQuery(".portfolio_items").isotope({filter:getIsotopeFilter()}),jQuery(this).parents("#portfolio_iso_filters").find("a").removeClass("current"),jQuery(this).addClass("current"),!1}),jQuery("#portfolio_load_more").on("click","a",function(){if(!jQuery(this).hasClass("no_results")){var e=".portfolio_items article.hidden"+("*"!=curIsotopeFilter?curIsotopeFilter:"");jQuery(e).each(function(e){ppp>e&&jQuery(this).addClass("visible").removeClass("hidden")}),jQuery(".portfolio_items").isotope({filter:getIsotopeFilter()}),jQuery(".portfolio_items article.visible").length===jQuery(".portfolio_items article").length&&jQuery("#more_results").addClass("no_results")}return!1})),jQuery(window).scroll(function(){jQuery(this).scrollTop()>=110?jQuery("#toTop").show():jQuery("#toTop").hide()}),jQuery("#toTop").click(function(e){jQuery("body,html").animate({scrollTop:0},800),e.preventDefault()})}),jQuery(window).scroll(function(){skills_anim()}),jQuery(window).load(function(){skills_anim(),pagesBuild(),jQuery(".portfolio_items").length&&(jQuery(".portfolio_items").isotope({filter:getIsotopeFilter()}),jQuery(".portfolio_items").css("height","300px").find("article").css("transform","none"))});